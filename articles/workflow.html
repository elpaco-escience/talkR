<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic workflow with talkr • talkr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic workflow with talkr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">talkr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/original_demo.html">original_demo</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Basic workflow with talkr</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Basic workflow with talkr</h1>
            
      

      <div class="d-none name"><code>workflow.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">talkr</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="loading-the-data">Loading the data<a class="anchor" aria-label="anchor" href="#loading-the-data"></a>
</h2>
<p>We will be using the IFADV corpus as example data for the workflow of
<code>talkr</code>. This is a corpus consisting of 20 dyadic
conversations in Dutch, published by the Nederlandse Taalunie in 2007
(<a href="https://fon.hum.uva.nl/IFA-SpokenLanguageCorpora/IFADVcorpus/" class="external-link">source</a>)</p>
<p>The snippet below initializes the talkr dataset using the ifadv data.
For more information about the IFADV dataset, see the <a href="https://github.com/elpaco-escience/ifadv" class="external-link">repository link</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span><span class="fu">ifadv</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/ifadv/man/ifadv.html" class="external-link">ifadv</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in init(ifadv::ifadv): Column 'uid' already exists in the dataset. This</span></span>
<span><span class="co">#&gt; column will be renamed to `original_uid`.</span></span></code></pre></div>
<p>Essential to any <code>talkr</code> workflow is a minimal set of data
fields. These are the following: * <code>source</code>: the source
conversation (a corpus can consist of multiple sources) *
<code>begin</code>: begin time (in ms) of an utterance *
<code>end</code>: end time (in ms) of an utterance *
<code>utterance</code>: content of an utterance *
<code>participant</code>: the person who produced the utterance</p>
<p>The <code><a href="../reference/init.html">init()</a></code> function takes these minimal fields and
generates a few more based on them. These are: * <code>uid</code>: a
unique identifier at utterance-level, used to identify, select and
felter specific utterances * <code>duration</code>: the duration (in ms)
of the utterance, generated by subtracting <code>begin</code> from
<code>end</code></p>
<p>The <code><a href="../reference/init.html">init()</a></code> function can be used to rename columns if
necessary. For example, if the column <code>participant</code> is named
<code>speaker</code>, we can rename it as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">talkr_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>             participant <span class="op">=</span> <span class="st">"speaker"</span><span class="op">)</span></span></code></pre></div>
<p>A dataset can contain additional fields. For instance, the IFADV
sample dataset also contain <code>language</code> (which is Dutch) and
<code>utterance_raw</code> (a fuller, less processed version of the
utterance content). It also contains measures related to turn-taking and
timing, including <code>FTO</code> (floor transfer offset, the offset
between current turn and that of a prior participant, in milliseconds)
and <code>freq</code> and <code>rank</code>, frequency measures of the
utterance content.</p>
</div>
<div class="section level2">
<h2 id="workflow-1-quality-control">Workflow 1: Quality control<a class="anchor" aria-label="anchor" href="#workflow-1-quality-control"></a>
</h2>
<div class="section level3">
<h3 id="summary-statistics">Summary statistics<a class="anchor" aria-label="anchor" href="#summary-statistics"></a>
</h3>
<p>The <code>report_stats</code> function provides a simple summary of a
dataset, including the total number of utterances, the total duration of
the conversation, the number of participants, and the number of
sources.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report_stats.html">report_stats</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; ### Corpus-level statistics </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; nr of sources: 20</span></span>
<span><span class="co">#&gt; nr of participants: 40</span></span>
<span><span class="co">#&gt; nr of turns: 14022</span></span>
<span><span class="co">#&gt; mean turn duration (ms): 1257</span></span>
<span><span class="co">#&gt; turns per hour: 2806</span></span>
<span><span class="co">#&gt; total recording (min): 299.9</span></span>
<span><span class="co">#&gt; total recording (hours): 5</span></span>
<span><span class="co">#&gt; total speaking time (min): 293.8</span></span>
<span><span class="co">#&gt; total speaking time (hours): 4.9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ### Conversation-level statistics (per source)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |source          | nr of participants| total recording (ms)| total recording (min)| total speaking time (ms)| total speaking time (min)|</span></span>
<span><span class="co">#&gt; |:---------------|------------------:|--------------------:|---------------------:|------------------------:|-------------------------:|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA10O  |                  2|               899341|                    15|                   829140|                      13.8|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA11Q  |                  2|               899061|                    15|                   884734|                      14.7|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA12S  |                  2|               900000|                    15|                   785323|                      13.1|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA13U  |                  2|               900000|                    15|                   877328|                      14.6|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA14W  |                  2|               900000|                    15|                   796924|                      13.3|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA15Y  |                  2|               899379|                    15|                  1032776|                      17.2|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA16AA |                  2|               900000|                    15|                   974312|                      16.2|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA17AC |                  2|               899961|                    15|                   885257|                      14.8|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA19AG |                  2|               899236|                    15|                   788268|                      13.1|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA1A   |                  2|               899538|                    15|                   879384|                      14.7|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA20AI |                  2|               899145|                    15|                   918466|                      15.3|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA22AL |                  2|               899838|                    15|                   879580|                      14.7|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA24AK |                  2|               900000|                    15|                   887106|                      14.8|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA2C   |                  2|               899635|                    15|                  1097376|                      18.3|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA3E   |                  2|               899091|                    15|                   851393|                      14.2|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA4C   |                  2|               899108|                    15|                   850314|                      14.2|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA6H   |                  2|               899981|                    15|                   889722|                      14.8|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA7B   |                  2|               899664|                    15|                   913682|                      15.2|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA8K   |                  2|               900000|                    15|                   807418|                      13.5|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA9M   |                  2|               899773|                    15|                   802054|                      13.4|</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ### Turn statistics (per source)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |source          | nr of turns| mean turn duration (ms)| shortest turn (ms)| longest turn (ms)| turns per hour|</span></span>
<span><span class="co">#&gt; |:---------------|-----------:|-----------------------:|------------------:|-----------------:|--------------:|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA10O  |         501|                    1655|                233|              3001|           2005|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA11Q  |         792|                    1117|                124|              4188|           3171|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA12S  |         640|                    1227|                173|              3819|           2560|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA13U  |         717|                    1224|                196|              3173|           2868|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA14W  |         721|                    1105|                 97|              3115|           2884|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA15Y  |         770|                    1341|                154|              4973|           3082|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA16AA |         604|                    1613|                292|              3447|           2416|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA17AC |         782|                    1132|                  0|              3453|           3128|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA19AG |         648|                    1216|                136|              2988|           2594|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA1A   |         681|                    1291|                143|              3417|           2725|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA20AI |         758|                    1212|                167|              5472|           3035|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA22AL |         745|                    1181|                143|              3448|           2981|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA24AK |         685|                    1295|                121|              4421|           2740|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA2C   |         765|                    1434|                217|              3415|           3061|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA3E   |         753|                    1131|                175|              3199|           3015|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA4C   |         719|                    1183|                145|              3697|           2879|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA6H   |         683|                    1303|                122|              4786|           2732|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA7B   |         691|                    1322|                197|              3395|           2765|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA8K   |         612|                    1319|                200|              8712|           2448|</span></span>
<span><span class="co">#&gt; |/dutch2/DVA9M   |         755|                    1062|                163|              2909|           3021|</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visual-quality-checks">Visual quality checks<a class="anchor" aria-label="anchor" href="#visual-quality-checks"></a>
</h3>
<p>The <code>plot_quality</code> function provides a visual check of the
nature of the data, by visualizing the distribution of turn durations,
and transition timing.</p>
<p>Transition timing is similar to FTO, but calculated without
additional quality checks: transitions are identified when the
participant changes from one turn to the next. The transition time is
then calculated as the difference between the beginning of the turn of
the new participant, and the end of the turn of the previous one.</p>
<p>By default, <code><a href="../reference/plot_quality.html">plot_quality()</a></code> will plot the entire
dataset:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_quality.html">plot_quality</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<p><img src="workflow_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>Quality plots can also be run for a specific source:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_quality.html">plot_quality</a></span><span class="op">(</span><span class="va">data</span>, source <span class="op">=</span> <span class="st">"/dutch2/DVA8K"</span><span class="op">)</span></span></code></pre></div>
<p><img src="workflow_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>A quality plot consists of three separate visualizations, all
designed to allow rapid visual inspection and spotting oddities: 1. A
density plot of turn durations. This is normally expected to look like a
distribution that has a peak around 2000ms (2 seconds) and maximum
lengths that do not far exceed 10000ms (10 seconds) (Liesenfeld &amp;
Dingemanse 2022). The goal of this plot is to allow eyeballing of
oddities like turns of extreme durations or sets of turns with the exact
same duration (unlikely in carefully segmented conversational data). 2.
A density plot of turn transition times. A plot like this is expected to
look like a normal distribution centered around 0-200ms (Stivers et
al. 2009). Deviations from this may signal problems in the dataset, for
instance due to imprecise or automated annotation methods. 3. A
scatterplot of turn transition (x) by turn duration. This combines both
distributions and is expected to look like a cloud of datapoints that is
thickest in the middle region. Any standout patterns (for instance,
turns whose duration is equal to their transition time) are indicative
of problems in the segmentation or timing data.</p>
</div>
</div>
<div class="section level2">
<h2 id="workflow-2-plot-conversations">Workflow 2: Plot conversations<a class="anchor" aria-label="anchor" href="#workflow-2-plot-conversations"></a>
</h2>
<p>Another key use of <code>talkr</code> is to visualize conversational
patterns. A first key way to do so is <code><a href="../reference/geom_turn.html">geom_turn()</a></code>, a
ggplot2-compatible geom that visualizes the timing and duration of turns
in a conversation.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">source</span> <span class="op">==</span> <span class="st">"/dutch2/DVA9M"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">end</span> <span class="op">&lt;</span> <span class="fl">60000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">end</span>, y <span class="op">=</span> <span class="va">participant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_turn.html">geom_turn</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    begin <span class="op">=</span> <span class="va">begin</span>,</span>
<span>    end <span class="op">=</span> <span class="va">end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Time (ms)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_turnPlot.html">theme_turnPlot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="workflow_files/figure-html/geom_turn_demo_1-1.png" width="768"></p>
<p>two specific geometries are available: <code>geom_turn</code> and
<code>geom_token</code>. In addition, there is a
<code>talkr</code>-specific theme provided.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">source</span> <span class="op">==</span> <span class="st">"/dutch2/DVA9M"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">end</span> <span class="op">&lt;</span> <span class="fl">60000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">end</span>, y <span class="op">=</span> <span class="va">participant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_turn.html">geom_turn</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    begin <span class="op">=</span> <span class="va">begin</span>,</span>
<span>    end <span class="op">=</span> <span class="va">end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Time (ms)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_turnPlot.html">theme_turnPlot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="workflow_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>This plot can be overlayed with plotted occurrences of tokens.</p>
<p>To do so, we first need to calculate the token frequencies:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tokens</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 70,074 × 9</span></span></span>
<span><span class="co">#&gt;    source     uid   participant nwords token order relative_time frequency  rank</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> /dutch2/D… dutc… spreker1 […      1 [lau… only            840  0.011<span style="text-decoration: underline;">4</span>      17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> /dutch2/D… dutc… spreker1 […      7 oké   first          <span style="text-decoration: underline;">1</span>826  0.002<span style="text-decoration: underline;">21</span>     77</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> /dutch2/D… dutc… spreker1 […      7 nou   midd…          <span style="text-decoration: underline;">2</span>115  0.009<span style="text-decoration: underline;">55</span>     21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> /dutch2/D… dutc… spreker1 […      7 ik    midd…          <span style="text-decoration: underline;">2</span>404  0.028<span style="text-decoration: underline;">8</span>       3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> /dutch2/D… dutc… spreker1 […      7 ga    midd…          <span style="text-decoration: underline;">2</span>693  0.001<span style="text-decoration: underline;">71</span>     90</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> /dutch2/D… dutc… spreker1 […      7 je    midd…          <span style="text-decoration: underline;">2</span>982  0.019<span style="text-decoration: underline;">1</span>       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> /dutch2/D… dutc… spreker1 […      7 even  midd…          <span style="text-decoration: underline;">3</span>271  0.001<span style="text-decoration: underline;">33</span>    107</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> /dutch2/D… dutc… spreker1 […      7 vert… last           <span style="text-decoration: underline;">3</span>560  0.000<span style="text-decoration: underline;">171</span>   468</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> /dutch2/D… dutc… spreker1 […      3 van   first          <span style="text-decoration: underline;">3</span>885  0.011<span style="text-decoration: underline;">7</span>      16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> /dutch2/D… dutc… spreker1 […      3 gist… midd…          <span style="text-decoration: underline;">4</span>246  0.000<span style="text-decoration: underline;">342</span>   272</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 70,064 more rows</span></span></span></code></pre></div>
<p>Token frequencies are calculated over the entire dataset. For
source-specific data, it is recommended to filter the source prior to
tokenization:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokens</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">source</span> <span class="op">==</span> <span class="st">"/dutch2/DVA9M"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tokens</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,971 × 9</span></span></span>
<span><span class="co">#&gt;    source     uid   participant nwords token order relative_time frequency  rank</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> /dutch2/D… dutc… spreker1 […     10 ja    first           327  0.045<span style="text-decoration: underline;">8</span>       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> /dutch2/D… dutc… spreker1 […     10 dat   midd…           526  0.024<span style="text-decoration: underline;">2</span>       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> /dutch2/D… dutc… spreker1 […     10 is    midd…           726  0.014<span style="text-decoration: underline;">4</span>      14</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> /dutch2/D… dutc… spreker1 […     10 lang  midd…           926  0.000<span style="text-decoration: underline;">252</span>   518</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> /dutch2/D… dutc… spreker1 […     10 gele… midd…          <span style="text-decoration: underline;">1</span>125  0.000<span style="text-decoration: underline;">252</span>   440</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> /dutch2/D… dutc… spreker1 […     10 dat   midd…          <span style="text-decoration: underline;">1</span>325  0.024<span style="text-decoration: underline;">2</span>       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> /dutch2/D… dutc… spreker1 […     10 we    midd…          <span style="text-decoration: underline;">1</span>524  0.006<span style="text-decoration: underline;">30</span>     36</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> /dutch2/D… dutc… spreker1 […     10 elka… midd…          <span style="text-decoration: underline;">1</span>724  0.000<span style="text-decoration: underline;">755</span>   174</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> /dutch2/D… dutc… spreker1 […     10 hebb… midd…          <span style="text-decoration: underline;">1</span>924  0.002<span style="text-decoration: underline;">52</span>     73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> /dutch2/D… dutc… spreker1 […     10 gezi… last           <span style="text-decoration: underline;">2</span>123  0.000<span style="text-decoration: underline;">504</span>   258</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3,961 more rows</span></span></span></code></pre></div>
<p>Before we plot the tokens over the turns, we need to select the
tokens we want to plot (e.g. the top 10 ranked), and the time window
they occur in:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tokenselection</span> <span class="op">&lt;-</span> <span class="va">tokens</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">relative_time</span> <span class="op">&lt;</span> <span class="fl">60000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rank</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>We can plot the tokens over the turns.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span><span class="fu"><a href="../reference/geom_token.html">geom_token</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tokenselection</span>,</span>
<span>           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">relative_time</span>,</span>
<span>               y <span class="op">=</span> <span class="va">participant</span>,</span>
<span>               color <span class="op">=</span> <span class="va">rank</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridis/reference/scale_viridis.html" class="external-link">scale_color_viridis</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"plasma"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, begin <span class="op">=</span> <span class="fl">0.2</span>, end <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p><img src="workflow_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Dingemanse, Barbara Vreede, Eva Viviani, Pablo Rodríguez-Sánchez, Netherlands eScience Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
